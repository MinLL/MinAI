<?php

// Fill Her Up animation prompts
$GLOBALS["PROMPTS"]["minai_fillherup_spermout_start"] = [
    "player_request"=>[
        "The Narrator: #SEX_INFO FHU_ACTOR begins leaking cum, their body trembling as the fluid starts to flow.",
        "The Narrator: #SEX_INFO FHU_ACTOR shivers as they feel the cum beginning to leak out.",
        "The Narrator: #SEX_INFO FHU_ACTOR's body tenses as they start expelling the cum inside them."
    ]
];
$GLOBALS["PROMPTS"]["info_minai_fillherup_spermout_start"] = $GLOBALS["PROMPTS"]["minai_fillherup_spermout_start"];

$GLOBALS["PROMPTS"]["minai_fillherup_spermout_loop"] = [
    "player_request"=>[
        "The Narrator: #SEX_INFO FHU_ACTOR continues to leak cum, their body quivering with each pulse.",
        "The Narrator: #SEX_INFO The flow of cum from FHU_ACTOR's body continues steadily.",
        "The Narrator: #SEX_INFO FHU_ACTOR's body continues to expel the cum inside them."
    ]
];
$GLOBALS["PROMPTS"]["info_minai_fillherup_spermout_loop"] = $GLOBALS["PROMPTS"]["minai_fillherup_spermout_loop"];


$GLOBALS["PROMPTS"]["minai_fillherup_spermout_end"] = [
    "player_request"=>[
        "The Narrator: #SEX_INFO The flow of cum from FHU_ACTOR's body finally slows to a stop.",
        "The Narrator: #SEX_INFO FHU_ACTOR sighs as the last of the cum drains from their body.",
        "The Narrator: #SEX_INFO FHU_ACTOR's body relaxes as they finish expelling the cum."
    ]
];
$GLOBALS["PROMPTS"]["info_minai_fillherup_spermout_end"] = $GLOBALS["PROMPTS"]["minai_fillherup_spermout_end"];


$GLOBALS["PROMPTS"]["minai_fillherup_spermanal_start"] = [
    "player_request"=>[
        "The Narrator: #SEX_INFO FHU_ACTOR feels the cum beginning to leak from their rear.",
        "The Narrator: #SEX_INFO FHU_ACTOR's body tenses as they begin expelling cum from their ass.",
        "The Narrator: #SEX_INFO FHU_ACTOR starts pushing out the cum filling their rear."
    ]
];
$GLOBALS["PROMPTS"]["info_minai_fillherup_spermanal_start"] = $GLOBALS["PROMPTS"]["minai_fillherup_spermanal_start"];


$GLOBALS["PROMPTS"]["minai_fillherup_spermanal_loop"] = [
    "player_request"=>[
        "The Narrator: #SEX_INFO FHU_ACTOR continues expelling cum from their rear.",
        "The Narrator: #SEX_INFO The flow of cum from FHU_ACTOR's ass continues steadily.",
        "The Narrator: #SEX_INFO FHU_ACTOR's body keeps pushing out the cum filling their rear."
    ]
];
$GLOBALS["PROMPTS"]["info_minai_fillherup_spermanal_loop"] = $GLOBALS["PROMPTS"]["minai_fillherup_spermanal_loop"];

$GLOBALS["PROMPTS"]["minai_fillherup_spermanal_end"] = [
    "player_request"=>[
        "The Narrator: #SEX_INFO FHU_ACTOR finishes expelling the cum from their rear.",
        "The Narrator: #SEX_INFO The last of the cum drains from FHU_ACTOR's ass.",
        "The Narrator: #SEX_INFO FHU_ACTOR's body relaxes as they finish pushing out the cum."
    ]
];
$GLOBALS["PROMPTS"]["info_minai_fillherup_spermanal_end"] = $GLOBALS["PROMPTS"]["minai_fillherup_spermanal_end"];

$GLOBALS["PROMPTS"]["minai_fillherup_spermoral_start"] = [
    "player_request"=>[
        "The Narrator: #SEX_INFO FHU_ACTOR begins to drool cum from their mouth.",
        "The Narrator: #SEX_INFO FHU_ACTOR starts expelling cum from their throat.",
        "The Narrator: #SEX_INFO Cum begins to leak from FHU_ACTOR's mouth."
    ]
];
$GLOBALS["PROMPTS"]["info_minai_fillherup_spermoral_start"] = $GLOBALS["PROMPTS"]["minai_fillherup_spermoral_start"];

$GLOBALS["PROMPTS"]["minai_fillherup_spermoral_loop"] = [
    "player_request"=>[
        "The Narrator: #SEX_INFO FHU_ACTOR continues drooling cum steadily.",
        "The Narrator: #SEX_INFO Cum keeps flowing from FHU_ACTOR's mouth.",
        "The Narrator: #SEX_INFO FHU_ACTOR's throat continues expelling cum."
    ]
];
$GLOBALS["PROMPTS"]["info_minai_fillherup_spermoral_loop"] = $GLOBALS["PROMPTS"]["minai_fillherup_spermoral_loop"];


$GLOBALS["PROMPTS"]["minai_fillherup_spermoral_end"] = [
    "player_request"=>[
        "The Narrator: #SEX_INFO FHU_ACTOR finishes expelling cum from their mouth.",
        "The Narrator: #SEX_INFO The last drops of cum drip from FHU_ACTOR's lips.",
        "The Narrator: #SEX_INFO FHU_ACTOR's throat finally stops leaking cum."
    ]
];
$GLOBALS["PROMPTS"]["info_minai_fillherup_spermoral_end"] = $GLOBALS["PROMPTS"]["minai_fillherup_spermoral_end"];

$GLOBALS["PROMPTS"]["minai_fillherup_sperm_expel"] = [
    "player_request"=>[
        "The Narrator: #SEX_INFO FHU_ACTOR forcefully expels the cum from their body, their muscles contracting with the effort.",
        "The Narrator: #SEX_INFO FHU_ACTOR pushes hard, forcing out the cum that had been filling them.",
        "The Narrator: #SEX_INFO With determined effort, FHU_ACTOR expels the cum from their body."
    ]
];
$GLOBALS["PROMPTS"]["info_minai_fillherup_sperm_expel"] = $GLOBALS["PROMPTS"]["minai_fillherup_sperm_expel"];

$GLOBALS["PROMPTS"]["minai_fillherup_sperm_expel_panting"] = [
    "player_request"=>[
        "The Narrator: #SEX_INFO FHU_ACTOR pants heavily as they try to expel the cum from their body.",
        "The Narrator: #SEX_INFO FHU_ACTOR breathes hard with exertion as they push out the cum.",
        "The Narrator: #SEX_INFO Panting with effort, FHU_ACTOR works to expel the cum filling them."
    ]
];
$GLOBALS["PROMPTS"]["info_minai_fillherup_sperm_expel_panting"] = $GLOBALS["PROMPTS"]["minai_fillherup_sperm_expel_panting"];

$GLOBALS["PROMPTS"]["minai_fillherup_sperm_expel_refuse"] = [
    "player_request"=>[
        "The Narrator: #SEX_INFO FHU_ACTOR's body refuses to expel the cum, keeping it trapped inside.",
        "The Narrator: #SEX_INFO FHU_ACTOR tries but fails to push out the cum filling them.",
        "The Narrator: #SEX_INFO Despite their efforts, FHU_ACTOR's body won't release the cum inside."
    ]
];
$GLOBALS["PROMPTS"]["info_minai_fillherup_sperm_expel_refuse"] = $GLOBALS["PROMPTS"]["minai_fillherup_sperm_expel_refuse"];

$GLOBALS["PROMPTS"]["minai_fillherup_sperm_expel_fail"] = [
    "player_request"=>[
        "The Narrator: #SEX_INFO FHU_ACTOR fails to expel the cum from their rear.",
        "The Narrator: #SEX_INFO FHU_ACTOR's attempts to push the cum from their ass prove futile.",
        "The Narrator: #SEX_INFO FHU_ACTOR struggles but can't expel the cum from their rear."
    ]
];
$GLOBALS["PROMPTS"]["info_minai_fillherup_sperm_expel_fail"] = $GLOBALS["PROMPTS"]["minai_fillherup_sperm_expel_fail"];

$GLOBALS["PROMPTS"]["minai_fillherup_belly_rubbing"] = [
    "player_request"=>[
        "The Narrator: #SEX_INFO FHU_ACTOR rubs their swollen belly, feeling the cum shifting inside.",
        "The Narrator: #SEX_INFO FHU_ACTOR massages their cum-filled belly gently.",
        "The Narrator: #SEX_INFO FHU_ACTOR tenderly caresses their belly, distended with cum."
    ]
];
$GLOBALS["PROMPTS"]["info_minai_fillherup_stomach_rubbing"] = $GLOBALS["PROMPTS"]["minai_fillherup_stomach_rubbing"];

// Fill Her Up inflation/absorption prompts
$GLOBALS["PROMPTS"]["minai_fillherup_inflate_vaginal"] = [
    "player_request"=>[
        "The Narrator: #SEX_INFO FHU_ACTOR's womb swells as it fills with cum, their belly slowly expanding.",
        "The Narrator: #SEX_INFO FHU_ACTOR gasps as their body is pumped full of cum, their belly beginning to bulge.",
        "The Narrator: #SEX_INFO FHU_ACTOR's abdomen starts to stretch as cum floods into their womb."
    ]
];
$GLOBALS["PROMPTS"]["info_minai_fillherup_inflate_vaginal"] = $GLOBALS["PROMPTS"]["minai_fillherup_inflate_vaginal"];

$GLOBALS["PROMPTS"]["minai_fillherup_inflate_anal"] = [
    "player_request"=>[
        "The Narrator: #SEX_INFO FHU_ACTOR's belly swells as cum floods their bowels.",
        "The Narrator: #SEX_INFO FHU_ACTOR moans as their gut fills with cum, their belly expanding.",
        "The Narrator: #SEX_INFO FHU_ACTOR's abdomen begins to bulge as cum pumps into their rear."
    ]
];
$GLOBALS["PROMPTS"]["info_minai_fillherup_inflate_anal"] = $GLOBALS["PROMPTS"]["minai_fillherup_inflate_anal"];

$GLOBALS["PROMPTS"]["minai_fillherup_inflate_oral"] = [
    "player_request"=>[
        "The Narrator: #SEX_INFO FHU_ACTOR's belly swells as they're forced to swallow more cum.",
        "The Narrator: #SEX_INFO FHU_ACTOR's belly expands as it fills with swallowed cum.",
        "The Narrator: #SEX_INFO FHU_ACTOR's abdomen stretches as cum floods their belly."
    ]
];
$GLOBALS["PROMPTS"]["info_minai_fillherup_inflate_oral"] = $GLOBALS["PROMPTS"]["minai_fillherup_inflate_oral"];

$GLOBALS["PROMPTS"]["minai_fillherup_absorb_vaginal"] = [
    "player_request"=>[
        "The Narrator: #SEX_INFO FHU_ACTOR's body absorbs the cum filling their womb, their belly slowly shrinking.",
        "The Narrator: #SEX_INFO FHU_ACTOR shivers as their body draws in the cum inside.",
        "The Narrator: #SEX_INFO The cum filling FHU_ACTOR's womb is gradually absorbed into their body."
    ]
];
$GLOBALS["PROMPTS"]["info_minai_fillherup_absorb_vaginal"] = $GLOBALS["PROMPTS"]["minai_fillherup_absorb_vaginal"];

$GLOBALS["PROMPTS"]["minai_fillherup_absorb_anal"] = [
    "player_request"=>[
        "The Narrator: #SEX_INFO FHU_ACTOR's body absorbs the cum filling their bowels.",
        "The Narrator: #SEX_INFO FHU_ACTOR trembles as their body draws in the cum from their rear.",
        "The Narrator: #SEX_INFO The cum filling FHU_ACTOR's gut is slowly absorbed into their system."
    ]
];
$GLOBALS["PROMPTS"]["info_minai_fillherup_absorb_anal"] = $GLOBALS["PROMPTS"]["minai_fillherup_absorb_anal"];

$GLOBALS["PROMPTS"]["minai_fillherup_absorb_oral"] = [
    "player_request"=>[
        "The Narrator: #SEX_INFO FHU_ACTOR's body absorbs the cum filling their belly.",
        "The Narrator: #SEX_INFO FHU_ACTOR quivers as their body processes the swallowed cum.",
        "The Narrator: #SEX_INFO The cum in FHU_ACTOR's belly is gradually absorbed into their system."
    ]
];
$GLOBALS["PROMPTS"]["info_minai_fillherup_absorb_oral"] = $GLOBALS["PROMPTS"]["minai_fillherup_absorb_oral"];

// Fill Her Up deflation prompts
$GLOBALS["PROMPTS"]["minai_fillherup_deflate_vaginal"] = [
    "player_request"=>[
        "The Narrator: #SEX_INFO FHU_ACTOR's womb slowly empties, their belly gradually returning to normal.",
        "The Narrator: #SEX_INFO The cum filling FHU_ACTOR's womb begins to drain away.",
        "The Narrator: #SEX_INFO FHU_ACTOR's swollen belly shrinks as their womb empties."
    ]
];
$GLOBALS["PROMPTS"]["info_minai_fillherup_deflate_vaginal"] = $GLOBALS["PROMPTS"]["minai_fillherup_deflate_vaginal"];

$GLOBALS["PROMPTS"]["minai_fillherup_deflate_anal"] = [
    "player_request"=>[
        "The Narrator: #SEX_INFO FHU_ACTOR's belly shrinks as their bowels empty.",
        "The Narrator: #SEX_INFO The cum filling FHU_ACTOR's rear begins to drain away.",
        "The Narrator: #SEX_INFO FHU_ACTOR's distended gut returns to normal as it empties."
    ]
];
$GLOBALS["PROMPTS"]["info_minai_fillherup_deflate_anal"] = $GLOBALS["PROMPTS"]["minai_fillherup_deflate_anal"];

$GLOBALS["PROMPTS"]["minai_fillherup_deflate_oral"] = [
    "player_request"=>[
        "The Narrator: #SEX_INFO FHU_ACTOR's belly shrinks as their belly empties.",
        "The Narrator: #SEX_INFO The cum filling FHU_ACTOR's belly begins to drain away.",
        "The Narrator: #SEX_INFO FHU_ACTOR's swollen belly returns to normal as their belly empties."
    ]
];
$GLOBALS["PROMPTS"]["info_minai_fillherup_deflate_oral"] = $GLOBALS["PROMPTS"]["minai_fillherup_deflate_oral"];

// FillHerUp event handler: inject correct actor name into prompt
if (
  isset($GLOBALS["gameRequest"]) &&
  isset($GLOBALS["gameRequest"][0]) &&
  (
    strpos($GLOBALS["gameRequest"][0], "minai_fillherup_") === 0 ||
    strpos($GLOBALS["gameRequest"][0], "info_minai_fillherup_") === 0
  )
) {
  $eventName = $GLOBALS["gameRequest"][0];
  $eventLine = isset($GLOBALS["gameRequest"][3]) ? $GLOBALS["gameRequest"][3] : "";
  $actorName = '';
  // Try possessive first
  if (preg_match("/^(.+?)'s /", $eventLine, $matches)) {
    $actorName = trim($matches[1]);
  } elseif (preg_match("/([A-Za-z0-9\- ]+) is performing animation/", $eventLine, $matches)) {
    $actorName = trim($matches[1]);
  }
  if (
    isset($GLOBALS["PROMPTS"]) &&
    isset($GLOBALS["PROMPTS"][$eventName]) &&
    isset($GLOBALS["PROMPTS"][$eventName]["player_request"])
  ) {
    $prompts = $GLOBALS["PROMPTS"][$eventName]["player_request"];
    $randomPrompt = $prompts[array_rand($prompts)];
    $finalPrompt = str_replace('FHU_ACTOR', $actorName, $randomPrompt);
    if (!empty($actorName)) {
      OverrideGameRequestPrompt($finalPrompt);
    }
  }
  // If no valid actor name, do not override prompt
}